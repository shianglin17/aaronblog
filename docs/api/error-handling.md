# API 錯誤處理

## 通用回應格式

### 成功回應
```json
{
    "status": "success",
    "code": 200,
    "message": "成功",
    "data": null
}
```

### 錯誤回應
```json
{
    "status": "error",
    "code": 400,
    "message": "錯誤訊息"
}
```

### 驗證錯誤回應
```json
{
    "status": "error",
    "code": 422,
    "message": "驗證錯誤",
    "meta": {
        "errors": {
            "email": ["電子郵件格式不正確"],
            "password": ["密碼至少需要 8 個字元"]
        }
    }
}
```

## HTTP 狀態碼

| 狀態碼 | 說明 | 使用場景 |
|--------|------|----------|
| 200 | 成功 | 請求成功處理 |
| 201 | 已建立 | 資源建立成功 |
| 400 | 請求錯誤 | 請求參數錯誤 |
| 401 | 未授權 | 需要登入或 Token 無效 |
| 403 | 禁止存取 | 權限不足 |
| 404 | 找不到資源 | 資源不存在 |
| 422 | 驗證錯誤 | 表單驗證失敗 |
| 429 | 請求過多 | 觸發 Rate Limiting |
| 500 | 伺服器錯誤 | 系統內部錯誤 |

## 錯誤處理最佳實踐

1. **檢查 status 欄位**：確認請求是否成功
2. **根據 code 欄位處理**：不同錯誤碼需要不同處理邏輯
3. **顯示適當錯誤訊息**：使用 message 欄位向用戶展示錯誤
4. **處理驗證錯誤**：422 錯誤時，從 meta.errors 中取得詳細驗證訊息 